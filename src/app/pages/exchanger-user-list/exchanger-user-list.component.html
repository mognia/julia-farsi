<h2>جستوجوی کاربران</h2>
<p class="text-muted">در این در این بخش با وارد کردن کد احراز هویت کاربر مورد نظر را پیدا کنید</p>
<div id="accordion-1" role="tablist" aria-multiselectable="true">
        <div  class="card">
            <div class="card-header" role="tab" id="headingThree">
              <h5 class="mb-0">
                <a class="collapsed" style="color: #3E50B4" data-toggle="collapse" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  لیست سوابق
                </a>
              </h5>
            </div>
            <div id="collapseThree" class="collapse" data-parent="#accordion-1" role="tabpanel" aria-labelledby="headingThree">
              <div class="card-body">
                    <table class="table table-striped">
                            <thead>
                                <tr>
                                        <th> تاریخ ثبت</th>

                                    <th>مقدار</th>
                                    <th>ایمیل کاربر</th>
                                    <th>وضعیت</th>
                                    <th>شماره رسید</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor='let i of receipts'>
                                        <td>{{i.exchangerSubmitDate}}</td>

                                    <td>{{i.amount}}</td>
                                    <td>{{i.userEmail}}</td>
                                    <td> <span  class="badge  mr-1" [ngClass]="{'badge-danger': i.status=='Closed'||i.status=='Canceled', 'badge-info': i.status=='Pending'}"> {{i.status}}</span></td>
                                    <td>{{i.receiptNumber}}</td>

                                </tr>
                            </tbody>
                        </table>
              </div>
            </div>
          </div>       
          </div>
<div class="row">
    <div class="col-md-12">
        <div widget class="card border-0 box-shadow" style=" font-size: 18px;   padding: 6%;">

            <form [formGroup]="search" (ngSubmit)="Search(search.value)">
                <div class="input-group ">

                    <input [formControl]="userNum" type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-append">
                        <button type="submit" class="btn btn-info">Go!</button>
                    </span>
                </div>
            </form>
            <div class="">

            </div>



        </div>
    </div>
    <div class="col-md-12">


        <div>
                <!--  -->
            <div *ngIf='dataSuccess' widget class="card border-0 box-shadow">

                <div *ngIf="!confirmed" class="card-body widget-body">
                    <div class="row">
                        <div *ngFor="let step of steps; let last = last" class="col-md-6 col-sm-6 col-6 step text-center">
                            <div class="d-flex justify-content-center align-items-center text-white pl-2 pr-2 mb-2 rounded step-content" [class.bg-success]="step.valid"
                                [class.bg-danger]="step.active" [class.confirmed]="confirmed">
                                <i class="fa {{ step.icon }} mr-2" aria-hidden="true"></i>
                                <span class="step-name">{{step.describ}}</span>
                            </div>
                        </div>
                    </div>

                    <div *ngFor="let step of steps" [hidden]="!step.active" class="col">
                        <!-- <div class="row">
                                <h4 class="mt-3 mb-3">
                                    <i class="fa {{ step.icon }}"></i> {{step.name}}</h4>
                            </div> -->


                        <form *ngIf="step.name=='Start ID Verification'" class="row bg-light pt-2">
                            <div class="element col-md-12">
                                <div class="verifyTitle">
                                    <i>{{user.firstName}} &nbsp;</i>
                                </div>
                                <div class="verifyTxt col-md-1">
                                    <strong class="text-truncate">نام</strong>
                                </div>

                            </div>


                            <div class="element col-md-12">
                                <div class="verifyTitle">
                                    <i>{{user.lastName}} &nbsp;</i>
                                </div>
                                <div class="verifyTxt col-md-1">
                                    <strong class="text-truncate">نام خانوادگی</strong>
                                </div>

                            </div>


                            <div class="element col-md-12">
                                <div class="verifyTitle">
                                    <i>{{user.telephone}}</i>
                                </div>
                                <div class="verifyTxt col-md-1">
                                    <strong class="text-truncate">شماره تلفن</strong>
                                </div>

                            </div>

                            <div class="element col-md-12">

                                <div class="verifyTitle">
                                    <i>{{user.address}} &nbsp;</i>
                                </div>
                                <div class="verifyTxt col-md-1">
                                    <strong class="text-truncate">آدرس</strong>
                                </div>
                            </div>



                            <div class="element col-md-12">
                                <div class="verifyTitle" style="font-family: initial">
                                    <i>{{user.walletAddress}} &nbsp;</i>
                                </div>
                                <div class="verifyTxt col-md-1">
                                    <strong class="text-truncate">آدرس اتریوم</strong>
                                </div>

                            </div>


                            <div class="element col-md-12">



                                <div class="modal fade" id="noheader-modal" tabindex="-1" role="dialog" style="display: none;">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <img style="    max-width: 450px;" src="http://localhost:3000/{{passImg}}" alt="" srcset="">
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="verifyTxt col-md-2">
                                    <button type="button" class="btn btn-secondary mr-1" data-toggle="modal" data-target="#noheader-modal">عکس پاسپورت</button>
                                </div>
                            </div>
                        </form>


                        <form style="padding:3% 2%;" *ngIf="step.name=='Personal Information'" [formGroup]="personalForm" class="row bg-light pt-2">

                            <div class="col-lg-4 mb-4 pull-right">
                                <h6>مدارک</h6>
                                <!-- <input type="file"  (change)="image($event)" formControlName="image" > -->
                                <input style="      left: 19px; position: absolute;width: 100%;opacity: 0;  left: 12px;" type="file" accept="image/*" formControlName="receipt" id="imginput" (change)="image($event)"
                                    class="img-upload-btn" />

                                <button class="btn btn-info btn-block rounded-0" type="button">
                                    <span *ngIf="!photo">
                                        <i class="fa fa-upload"></i> Select Image... </span>
                                    <span *ngIf="photo">
                                        <i class="fa fa-refresh"></i> Change Image... </span>
                                </button>

                                <div class="image-wrapper">
                                    <i *ngIf="photo" class="fa fa-times delete-img" (click)="removeImage()"></i>
                                    <img [attr.src]="photo" *ngIf="photo" width="100%">
                                    <img src="assets/img/app/no-image.png" *ngIf="!photo" width="100%">
                                </div>


                                <div class="err">{{fileExtensionMessage}}</div>
                            </div>
                            <div class="col-md-8">
                                    <div class="amount">
                                        <input style="max-width:50%;    margin-right: 2.5%;" formControlName="amount" class="form-control" [ngClass]="{'form-control-danger' :  personalForm.get('amount').hasError('required'), 'form-control-success' :  !personalForm.get('amount').hasError('required') }"
                                            type="number">
    
                                        <label class="form-control-label"  [ngClass]="{'form-control-danger' :  personalForm.get('amount').hasError('required'), 'form-control-success' :  !personalForm.get('amount').hasError('required') }">مبلغ خرید</label>
                                        <small class="text-danger" *ngIf="step.hasError && personalForm.get('amount').hasError('required')">مبلغ را وارد کنید</small>
                                    </div>
                                    <div class="comment">
                                            <label class="form-control-label">توضیحات</label>
                                            <textarea formControlName="comment" class="form-control"></textarea>
                                    </div>
                                </div>
                        </form>




                    </div>

                    <div class="row mt-3">
                        <div class="col">
                            <button class="btn btn-primary pull-right" (click)="prev()">
                                <i class="fa fa-chevron-right arrow"></i>&nbsp; قبلی</button>

                            <button *ngIf="!steps[steps.length-2].active"  class="btn btn-primary pull-left"
                                (click)="next()">بعدی &nbsp;
                                <i class="fa fa-chevron-left arrow"></i>

                            </button>


                            <button *ngIf="steps[steps.length-2].active"  class="btn btn-primary pull-left" (click)="confirm()">ثبت خرید &nbsp;
                                <i class="fa fa-check arrow"></i>
                            </button>
                        </div>
                    </div>

                </div>

                <div *ngIf="confirmed" class="card-body widget-body">

                    <div class="col bg-light p-5">
                        <div class="d-flex justify-content-center align-items-center flex-column bg-light confirmed-content">
                            <i *ngIf="dataSuccess" class="fa fa-check text-success" aria-hidden="true"></i>
                            <h2 class="p-3">{{dataMsg}}</h2>
                            <button class="btn btn-success" (click)="home()">بازگشت</button>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>
</div>