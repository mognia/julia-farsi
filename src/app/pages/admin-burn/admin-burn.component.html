<div widget class="card border-0 box-shadow box">
    <div class="row">
      <div class="col-md-12">
        <div class="sectionTitle">
          <p>لیست فروش های در انتظار تایید</p>
        </div>
        <div *ngIf="noPending" style="    margin-bottom: 20px;" class="card card-outline-primary">
          <div class="card-body text-center">
            <p class="text-primary">فعلا فروش در انتظار تایید وجود ندارد</p>
            <!-- <p class="card-text"><code>123123</code></p> -->
          </div>
        </div>
        <table *ngIf="!noPending" class="table table-striped">
          <thead>
            <tr>
                <th>تایید ایمیل</th>
              <th> تاریخ ثبت</th>
              <th>مقدار</th>
              <th>ایمیل کاربر</th>

              <th>وضعیت</th>
              <th>شماره درخواست</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor='let i of pendingBurns'>
                <td *ngIf='!i.verified'>
                    <label class="Notconfirmedmail">ایمیل تایید نشده</label>
                </td>
                <td *ngIf='i.verified'>
                    <label class="confirmedmail">ایمیل تایید شده</label>
                </td>
              <td>{{i.userSubmitDate}}</td>
              <td>{{i.amount}}</td>
              <td>{{i.userEmail}}</td>

              <td>
                <div aria-label="Second group" class="btn-group " role="group">
                  <button data-toggle="modal" data-target="#rejectModal" (click)="getNum(i.BurnRequestNumber)" class="btn btn-danger" type="button">
                    <i class="fa fa-times"></i>
                  </button>
                  <button data-toggle="modal" data-target="#approveModal" (click)="getNum(i.BurnRequestNumber)" class="btn btn-success" type="button">
                    <i class="fa fa-check"></i>
                  </button>
                </div>
              </td>
              <td>{{i.BurnRequestNumber}}</td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>
  
  </div>



  <div widget class="card border-0 box-shadow box">
      <div class="row">
        <div class="col-md-12">
          <div class="sectionTitle">
            <p>لیست خرید های تایید شده</p>
          </div>
          <div *ngIf="noApproved" style="    margin-bottom: 20px;" class="card card-outline-primary">
            <div class="card-body text-center">
              <p class="text-primary">فعلا خرید تایید شده ای وجود ندارد</p>
              <!-- <p class="card-text"><code>123123</code></p> -->
            </div>
          </div>
          <table class="table table-striped">
              <thead>
                <tr>
                    <th>تایید ایمیل</th>
                  <th> تاریخ ثبت </th>
                  <th>مقدار</th>
                  <!-- <th>رسید کاربر</th> -->
                  <th>ایمیل کاربر</th>
                  <!-- <th>رسید صراف</th> -->
                  <th>وضعیت</th>
                  <th>شماره درخواست</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor='let i of approvedBurns'>
                    <td *ngIf='!i.verified'>
                        <label class="Notconfirmedmail">ایمیل تایید نشده</label>
                    </td>
                    <td *ngIf='i.verified'>
                        <label class="confirmedmail">ایمیل تایید شده</label>
                    </td>
                  <td>{{i.userSubmitDate}}</td>
                  <td>{{i.amount}}</td>
                  <!-- <td><button data-toggle="modal" data-target="#userImg" class="btn btn-outline-info w-100p mb-1 mr-1" type="button">رسید کاربر</button></td> -->
                  <td>{{i.userEmail}}</td>
                  <!-- <td><button data-toggle="modal" data-target="#exchangerImg" class="btn btn-outline-primary  w-100p mb-1 mr-1" type="button">رسید صراف</button></td> -->
      
                  <td>
      
                    <span class="badge  mr-1" [ngClass]="{'badge-danger': i.status=='Closed'||i.status=='Canceled', 'badge-info': i.status=='Pending', 'badge-success': i.status=='Approved'}">
                      {{i.status}}</span>
      
                  </td>
                  <td>{{i.BurnRequestNumber}}</td>
                </tr>
              </tbody>
            </table>
        </div>
      </div>
    
    </div>


    <div widget class="card border-0 box-shadow box">
        <div class="row">
          <div class="col-md-12">
            <div class="sectionTitle">
              <p>لیست خرید های تایید شده</p>
            </div>
            <div *ngIf="noRejecte" style="    margin-bottom: 20px;" class="card card-outline-primary">
              <div class="card-body text-center">
                <p class="text-primary">فعلا خرید تایید شده ای وجود ندارد</p>
                <!-- <p class="card-text"><code>123123</code></p> -->
              </div>
            </div>
            <table class="table table-striped">
                <thead>
                  <tr>
                      <th>تایید ایمیل</th>
                    <th> تاریخ ثبت </th>
                    <th>مقدار</th>
                    <!-- <th>رسید کاربر</th> -->
                    <th>ایمیل کاربر</th>
                    <!-- <th>رسید صراف</th> -->
                    <th>وضعیت</th>
                    <th>شماره درخواست</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor='let i of rejectedBurns'>
                      <td *ngIf='!i.verified'>
                          <label class="Notconfirmedmail">ایمیل تایید نشده</label>
                      </td>
                      <td *ngIf='i.verified'>
                          <label class="confirmedmail">ایمیل تایید شده</label>
                      </td>
                    <td>{{i.userSubmitDate}}</td>
                    <td>{{i.amount}}</td>
                    <!-- <td><button data-toggle="modal" data-target="#userImg" class="btn btn-outline-info w-100p mb-1 mr-1" type="button">رسید کاربر</button></td> -->
                    <td>{{i.userEmail}}</td>
                    <!-- <td><button data-toggle="modal" data-target="#exchangerImg" class="btn btn-outline-primary  w-100p mb-1 mr-1" type="button">رسید صراف</button></td> -->
        
                    <td>
        
                      <span class="badge  mr-1" [ngClass]="{'badge-danger': i.status=='Rejected'||i.status=='Canceled', 'badge-info': i.status=='Pending', 'badge-success': i.status=='Approved'}">
                        {{i.status}}</span>
        
                    </td>
                    <td>{{i.BurnRequestNumber}}</td>
                  </tr>
                </tbody>
              </table>
          </div>
        </div>
      
      </div>

  <!-- MODALS -->
  <div class="modal fade" id="rejectModal" tabindex="-1" role="dialog" aria-labelledby="modal-danger-label">
      <div *ngIf="!err && !success" class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header state modal-danger">
            <h4 class="modal-title" id="modal-danger-label">
              شماره رسید: {{reciptNum}} </h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <flash-messages></flash-messages>
            <form (ngSubmit)="onSubmit(form.value)" [formGroup]="rejectForm" class="form-horizontal">
    
    
    
              <div class="form-group row text-sm-right">
    
                <div class="col-sm-9">
                  <textarea formControlName="comment" type="text" class="form-control" id="email-h-t"></textarea>
                  <small class="text-danger" *ngIf="rejectForm.get('comment').hasError('required')">ذکر توضیحات الزامی است</small>
                </div>
                <label for="email-h-f" class="col-sm-3 form-control-label mt-1">توضیحات</label>
    
              </div>
              <div class="modal-footer">
                <button type="button"  (click)='reject()' class="btn btn-danger">تایید</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">بستن</button>
              </div>
            </form>
          </div>
    
        </div>
      </div>
    
      <div *ngIf="err" class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header state modal-danger">
            <h4 class="modal-title" id="modal-danger-label">
              <i class="fa fa-exclamation"></i>Error</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">x</span>
            </button>
          </div>
          <div class="modal-body">
            {{Msg}}
          </div>
          <div class="modal-footer">
            <button type="button" (click)='reload()' class="btn btn-default" data-dismiss="modal">تلاش مجدد</button>
          </div>
        </div>
      </div>
    
      <div *ngIf="success" class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header state modal-success">
            <h4 class="modal-title" id="modal-success-label">
              <i class="fa fa-exclamation"></i>تمام</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">x</span>
            </button>
          </div>
          <div class="modal-body">
            {{Msg}}
          </div>
          <div class="modal-footer">
            <button type="button" (click)='reload()' class="btn btn-default" data-dismiss="modal">بستن</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="approveModal" tabindex="-1" role="dialog" aria-labelledby="modal-warning-label">
        <div *ngIf="!err && !success" class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header state modal-warning">
              <h4 class="modal-title" id="modal-warning-label">
                شماره رسید: {{reciptNum}} </h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
            </div>
            <div class="modal-body">
              <flash-messages></flash-messages>
              <form (ngSubmit)="onSubmit(form.value)" [formGroup]="approveForm" class="form-horizontal">
      
      
      
                <div class="form-group row text-sm-right">
      
                  <div class="col-sm-9">
                    <textarea formControlName="comment" type="text" class="form-control" id="email-h-t"></textarea>
      
                  </div>
                  <label for="email-h-f" class="col-sm-3 form-control-label mt-1">توضیحات</label>
                </div>
                <div class="modal-footer">
                  <button type="button" (click)='approve()' class="btn btn-success">تایید</button>
                  <button type="button" class="btn btn-default" data-dismiss="modal">بستن</button>
                </div>
              </form>
            </div>
      
          </div>
        </div>
      
        <div *ngIf="err" class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header state modal-danger">
              <h4 class="modal-title" id="modal-danger-label">
                <i class="fa fa-exclamation"></i>Error</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">x</span>
              </button>
            </div>
            <div class="modal-body">
              {{Msg}}
            </div>
            <div class="modal-footer">
              <button type="button" (click)='reload()' class="btn btn-default" data-dismiss="modal">تلاش مجدد</button>
            </div>
          </div>
        </div>
      
        <div *ngIf="success" class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header state modal-success">
              <h4 class="modal-title" id="modal-success-label">
                <i class="fa fa-exclamation"></i>تمام</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">x</span>
              </button>
            </div>
            <div class="modal-body">
              {{Msg}}
            </div>
            <div class="modal-footer">
              <button type="button" (click)='reload()' class="btn btn-default" data-dismiss="modal">بستن</button>
            </div>
          </div>
        </div>
      </div>